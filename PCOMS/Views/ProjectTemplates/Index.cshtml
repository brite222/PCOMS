@model IEnumerable<PCOMS.Application.DTOs.ProjectTemplateDto>

@{
    ViewData["Title"] = "Project Templates";
    var categories = ViewBag.Categories as IEnumerable<string>;
    var mostUsed = ViewBag.MostUsed as IEnumerable<PCOMS.Application.DTOs.ProjectTemplateDto>;
    var selectedCategory = ViewBag.SelectedCategory as string;
}

<div class="container-fluid mt-4">
    <!-- Header -->
    <div class="row mb-4">
        <div class="col-md-8">
            <h2><i class="bi bi-layout-text-window-reverse"></i> Project Templates</h2>
            <p class="text-muted">Quick-start projects with pre-built templates</p>
        </div>
        <div class="col-md-4 text-end">
            <a asp-action="Create" class="btn btn-primary">
                <i class="bi bi-plus-circle"></i> Create Template
            </a>
        </div>
    </div>

    <!-- Templates Grid -->
    @if (Model.Any())
    {
        <div class="row g-4">
            @foreach (var template in Model)
            {
                <div class="col-md-6 col-lg-4">
                    <div class="card h-100">
                        <div class="card-header d-flex justify-content-between">
                            <strong>@template.Name</strong>
                            <span class="badge bg-primary">@template.Category</span>
                        </div>
                        <div class="card-body">
                            @if (!string.IsNullOrEmpty(template.Description))
                            {
                                <p class="small">@template.Description</p>
                            }

                            <div class="small mt-3">
                                <div><i class="bi bi-check-square"></i> @template.Tasks.Count tasks</div>
                                <div><i class="bi bi-flag"></i> @template.Milestones.Count milestones</div>
                                <div><i class="bi bi-clock"></i> @template.EstimatedDurationDays days</div>
                                <div><i class="bi bi-cash"></i> ₦@template.EstimatedBudget.ToString("N0")</div>
                            </div>
                        </div>
                        <div class="card-footer">
                            <a asp-action="UseTemplate" asp-route-id="@template.Id" class="btn btn-sm btn-success">
                                Use Template
                            </a>
                            <a asp-action="Details" asp-route-id="@template.Id" class="btn btn-sm btn-outline-primary">
                                Details
                            </a>
                        </div>
                    </div>
                </div>
            }
        </div>
    }
    else
    {
        <div class="alert alert-info">
            No templates found. <a asp-action="Create">Create your first template</a>
        </div>
    }
</div>
